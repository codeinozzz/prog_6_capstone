<section class="waiting-room">
  <h1 class="waiting-room__title">Waiting Room</h1>

  @if (errorMessage) {
    <div class="error-message">
      {{ errorMessage }}
    </div>
  }

  <div class="waiting-room__create">
    <h2>Create Room</h2>
    <div class="waiting-room__create-form">
      <input
        class="waiting-room__input"
        [(ngModel)]="newRoomName"
        placeholder="Room name"
      />
      <select class="waiting-room__select" [(ngModel)]="selectedMap">
        <option value="desert">Desert</option>
        <option value="night_city">Night City</option>
        <option value="forest">Forest</option>
      </select>
      <button class="waiting-room__button" (click)="createRoom()">Create</button>
    </div>
  </div>

  <div class="waiting-room__rooms">
    <h2>Available Rooms</h2>
    @if (rooms.length === 0) {
      <p class="waiting-room__empty">No rooms available</p>
    }
    <ul class="waiting-room__list">
      @for (room of rooms; track room.id) {
        <li class="waiting-room__room-item">
          <span class="waiting-room__room-name">{{ room.roomName }}</span>
          <span class="waiting-room__room-players">{{ room.currentPlayers }}/{{ room.maxPlayers }}</span>
          <span class="waiting-room__room-status">{{ room.status }}</span>
          <button class="waiting-room__button" (click)="joinRoom(room.id)">Join</button>
        </li>
      }
    </ul>
  </div>

  <div class="waiting-room__chat">
    <h2 class="waiting-room__chat-title">Chat</h2>
    <div class="waiting-room__chat-messages">
      @for (message of chatMessages(); track message.timestamp) {
        <p class="waiting-room__chat-message">
          <strong>{{ message.sender }}:</strong> {{ message.text }}
        </p>
      }
    </div>

    <form class="waiting-room__chat-form" (ngSubmit)="sendMessage()">
      <input
        class="waiting-room__chat-input"
        name="message"
        [(ngModel)]="messageText"
        placeholder="Type a message..."
        autocomplete="off"
      />
      <button class="waiting-room__chat-button" type="submit">Send</button>
    </form>
  </div>
</section>
